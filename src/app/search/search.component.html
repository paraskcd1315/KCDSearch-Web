<div class="min-h-screen py-8 px-4">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-8">
        <h1 class="text-5xl font-bold text-gray-900 mb-2">KCD Search</h1>
        <p class="text-gray-600">Powered by SearXNG</p>
      </div>
  
      <!-- Search Form -->
      <form (ngSubmit)="onSearch()" class="mb-6" role="search" aria-label="Search form">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Search the web...</mat-label>
          <input
            matInput
            type="search"
            [value]="searchQuery()"
            (input)="searchQuery.set($any($event.target).value)"
            (keydown)="onKeyDown($event)"
            placeholder="Enter your search query"
            aria-label="Search query"
            autocomplete="off"
            autofocus
          />
          @if (searchQuery()) {
            <button
              matSuffix
              mat-icon-button
              type="button"
              (click)="onClear()"
              aria-label="Clear search"
            >
              <mat-icon>close</mat-icon>
            </button>
          }
        </mat-form-field>
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="!searchQuery().trim() || isLoading()"
          class="w-full"
          aria-label="Submit search"
        >
          @if (isLoading() && !hasResults()) {
            <mat-spinner diameter="20" class="inline-block mr-2"></mat-spinner>
            Searching...
          } @else {
            <mat-icon>search</mat-icon>
            Search
          }
        </button>
      </form>
  
      <!-- Empty State -->
      @if (showEmptyState()) {
        <div class="text-center py-12 text-gray-500">
          <mat-icon class="text-6xl mb-4 opacity-50">search</mat-icon>
          <p class="text-lg">Enter a search query to get started</p>
        </div>
      }
  
      <!-- No Results -->
      @if (hasSearched() && !hasResults() && !isLoading()) {
        <div class="text-center py-12 text-gray-500">
          <mat-icon class="text-6xl mb-4 opacity-50">search_off</mat-icon>
          <p class="text-lg">No results found for "{{ query() }}"</p>
        </div>
      }
  
      <!-- Results -->
      @if (hasResults()) {
        <div class="mb-4 text-sm text-gray-600" aria-live="polite">
          Showing {{ results().length }} of {{ totalResults() || results().length }} result{{ (totalResults() || results().length) === 1 ? '' : 's' }}
        </div>
        <div class="space-y-4" role="region" aria-label="Search results">
          @for (result of results(); track trackByUrl($index, result)) {
            <mat-card class="hover:shadow-lg transition-shadow">
              <mat-card-header>
                <mat-card-title>
                  <a
                    [href]="result.url"
                    [target]="'_blank'"
                    [rel]="'noopener noreferrer'"
                    class="text-blue-600 hover:text-blue-800 hover:underline text-xl font-medium"
                  >
                    {{ result.title || 'Untitled' }}
                  </a>
                </mat-card-title>
                <mat-card-subtitle class="text-sm text-gray-500 mt-1">
                  {{ formatUrl(result.url) }}
                </mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <p class="text-gray-700 leading-relaxed">{{ result.content || 'No description available' }}</p>
              </mat-card-content>
              @if (result.engine) {
                <mat-card-footer class="px-4 pb-4">
                  <mat-chip-set>
                    <mat-chip>{{ result.engine }}</mat-chip>
                  </mat-chip-set>
                </mat-card-footer>
              }
            </mat-card>
          }
        </div>
  
        <!-- Loading More Indicator -->
        @if (isLoadingMore()) {
          <div class="flex justify-center items-center py-8" aria-live="polite">
            <mat-spinner diameter="40"></mat-spinner>
            <span class="ml-4 text-gray-600">Loading more results...</span>
          </div>
        }
  
        <!-- End of Results -->
        @if (!hasMorePages() && !isLoading()) {
          <div class="text-center py-8 text-gray-500">
            <p>No more results to load</p>
          </div>
        }
      }
    </div>
  </div>